<section class="accordion">
  <div class="accordion-header" (click)="toggleAccordion()">
    <h2>Cambiar contrase単a</h2>
    <ng-icon [name]="isAccordionOpen ? 'heroChevronUp' : 'heroChevronDown'" class="icon icon-small" />
  </div>

  <div class="accordion-body" *ngIf="isAccordionOpen">
    <form [formGroup]="form" (ngSubmit)="changePassword()">
      
      <div class="form-group2">
        <div class="input container">
          <ng-icon class="icon icon-medium" name="heroLockClosed" />
          <input class="input" [type]="statusButtonOne === 'showPassword' ? 'text' : 'password'" formControlName="oldPassword" placeholder="Contrase単a actual" />
          <ng-icon class="icon icon-small" 
                   [name]="statusButtonOne === 'hidePassword' ? 'heroEyeSlash' : 'heroEye'" 
                   (click)="showPassword(1)" />
        </div>
        @if(form.get('oldPassword')?.touched){
          <app-form-error [control]="form.get('oldPassword')!"></app-form-error>
        }@else{
          <div style="min-height: var(--font-size-xl); margin-top: var(--margin-m);"></div>
        }
      </div>

      <div class="form-group2">
        <div class="input container">
          <ng-icon class="icon icon-medium" name="heroLockClosed" />
          <input class="input" [type]="statusButtonTwo === 'showPassword' ? 'text' : 'password'" formControlName="newPassword" placeholder="Contrase単a nueva" />
          <ng-icon class="icon icon-small" 
                   [name]="statusButtonTwo === 'hidePassword' ? 'heroEyeSlash' : 'heroEye'" 
                   (click)="showPassword(2)" />
        </div>
        @if(form.get('newPassword')?.touched){
          <app-form-error [control]="form.get('newPassword')!"></app-form-error>
        }@else{
          <div style="min-height: var(--font-size-xl); margin-top: var(--margin-m);"></div>
        }
      </div>

      <div class="form-group2">
        <div class="input container">
          <ng-icon class="icon icon-medium" name="heroLockClosed" />
          <input class="input" [type]="statusButtonThree === 'showPassword' ? 'text' : 'password'" formControlName="newPasswordRepeat" placeholder="Contrase単a nueva otra vez" />
          <ng-icon class="icon icon-small" 
                   [name]="statusButtonThree === 'hidePassword' ? 'heroEyeSlash' : 'heroEye'" 
                   (click)="showPassword(3)" />
        </div>
        @if(form.get('newPasswordRepeat')?.touched){
          <app-form-error [control]="form.get('newPasswordRepeat')!"></app-form-error>
        }@else{
          <div style="min-height: var(--font-size-xl); margin-top: var(--margin-m);"></div>
        }
      </div>

      <button type="submit" class="btn success full" [disabled]="form.invalid || !isFormEnabled">
        Guardar
      </button>
    </form>
  </div>
</section>
